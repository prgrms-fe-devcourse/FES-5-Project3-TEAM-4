import { useEffect, useRef, type RefObject } from 'react';
import { DrawSVGPlugin } from 'gsap/DrawSVGPlugin';
import gsap from 'gsap';

gsap.registerPlugin(DrawSVGPlugin);

interface Props {
  parentTimeline: RefObject<gsap.core.Timeline | null>;
  label?: string;
}

function SecondQ1({ parentTimeline, label }: Props) {
  const svgRef = useRef<SVGSVGElement | null>(null);

  useEffect(() => {
    const ctx = gsap.context(() => {
      if (!svgRef.current) return;
      if (!parentTimeline.current) return;
      // 모든 path를 선택
      const paths = svgRef.current.querySelectorAll('path');

      parentTimeline.current.fromTo(
        paths,
        { drawSVG: '0% 0%' },
        {
          duration: 2,
          // stagger: 0.3,
          drawSVG: '0% 100%',
          ease: 'none',
        },
        label
      );
    }, svgRef);

    return () => ctx.revert();
  }, [label, parentTimeline]);

  return (
    <svg
      ref={svgRef}
      width="341"
      height="41"
      viewBox="0 0 341 41"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M0.44 12.56L1.8 3.96L5.36 4.48L3.32 13L0.44 12.56ZM6.44 12.64L9.08 3.96L12.48 4.68L9.24 13.2L6.44 12.64ZM43.8156 21.64L40.8956 21.36L43.3756 3L47.0956 3.28L43.8156 21.64ZM20.4556 23.96L20.8156 11.64L18.4556 12.2L17.8556 9.48L33.4156 5.92L33.8156 8.68L24.3756 10.84L24.1356 14L32.4156 11.84L32.9756 14.76L23.8956 16.96L23.6556 20.12L35.4956 17.28L35.8556 19.84L20.4556 23.96ZM46.4156 27L40.5756 33.72L46.1356 33.28L46.4156 36.16L36.5356 37.04L35.6956 34.4L41.3356 28.04L32.9756 29.24L32.5356 36.72L29.7756 36.96L29.8556 24.36L33.2556 24.08L33.1356 26.2L43.9756 24.56L46.4156 27ZM82.6556 22.76L79.8156 22.56L82.0956 1.92L85.8956 2.2L84.3756 11.8L91.5356 9.68L92.6556 12.8L83.8156 15.32L82.6556 22.76ZM66.6956 18.72L60.6556 26.72L58.0156 24.76L69.2956 10.08L59.9756 11.84L59.4156 8.44L72.9756 6.28L73.8156 9.24L68.7756 15.92L73.3356 22L70.6956 23.92L66.6956 18.72ZM77.4956 24.96C78.7756 24.8267 79.8823 24.8933 80.8156 25.16C81.749 25.4 82.5223 25.7733 83.1356 26.28C83.7756 26.76 84.2423 27.3333 84.5356 28C84.829 28.6667 84.9756 29.3333 84.9756 30C84.949 31.04 84.6956 32.0133 84.2156 32.92C83.7356 33.8267 83.1356 34.6267 82.4156 35.32C81.6956 36.04 80.8956 36.6133 80.0156 37.04C79.1356 37.4933 78.2823 37.76 77.4556 37.84C75.7756 38.0267 74.3223 37.8667 73.0956 37.36C71.8956 36.8533 71.0156 35.8533 70.4556 34.36C70.0556 33.32 69.949 32.2667 70.1356 31.2C70.349 30.1333 70.789 29.16 71.4556 28.28C72.1223 27.4 72.9756 26.6667 74.0156 26.08C75.0556 25.4667 76.2156 25.0933 77.4956 24.96ZM81.5356 30.64C81.5356 30.24 81.429 29.8667 81.2156 29.52C81.0023 29.1733 80.6956 28.88 80.2956 28.64C79.9223 28.4 79.4556 28.2267 78.8956 28.12C78.3623 28.0133 77.7756 28 77.1356 28.08C76.5756 28.16 76.029 28.36 75.4956 28.68C74.9623 28.9733 74.509 29.3467 74.1356 29.8C73.7623 30.2267 73.4956 30.7067 73.3356 31.24C73.2023 31.7733 73.2423 32.32 73.4556 32.88C73.749 33.6533 74.2823 34.1733 75.0556 34.44C75.8556 34.7067 76.6823 34.7867 77.5356 34.68C77.9623 34.6267 78.4023 34.4933 78.8556 34.28C79.3356 34.0667 79.7623 33.7867 80.1356 33.44C80.5356 33.0933 80.869 32.68 81.1356 32.2C81.4023 31.7467 81.5356 31.2267 81.5356 30.64ZM121.936 35.56L125.096 4.96L129.096 5.2L125.136 35.76L121.936 35.56ZM106.776 27.24C105.922 27.24 105.109 27.0667 104.336 26.72C103.589 26.3733 102.909 25.8933 102.296 25.28C101.682 24.64 101.176 23.8933 100.776 23.04C100.376 22.16 100.122 21.2133 100.016 20.2C99.909 19.16 100.002 18.08 100.296 16.96C100.589 15.84 101.069 14.8133 101.736 13.88C102.402 12.9467 103.229 12.1733 104.216 11.56C105.229 10.92 106.376 10.56 107.656 10.48C108.562 10.4267 109.456 10.52 110.336 10.76C111.242 11 112.069 11.4 112.816 11.96C113.562 12.4933 114.176 13.1867 114.656 14.04C115.162 14.8933 115.456 15.92 115.536 17.12C115.642 18.5333 115.482 19.8667 115.056 21.12C114.656 22.3467 114.056 23.4133 113.256 24.32C112.456 25.2267 111.496 25.9467 110.376 26.48C109.282 26.9867 108.082 27.24 106.776 27.24ZM107.416 23.76C108.162 23.7333 108.842 23.56 109.456 23.24C110.069 22.8933 110.589 22.4533 111.016 21.92C111.469 21.36 111.802 20.72 112.016 20C112.229 19.28 112.296 18.52 112.216 17.72C112.136 17.0533 111.936 16.48 111.616 16C111.322 15.4933 110.949 15.0933 110.496 14.8C110.042 14.48 109.549 14.2533 109.016 14.12C108.482 13.9867 107.962 13.9467 107.456 14C106.682 14.08 106.016 14.32 105.456 14.72C104.896 15.0933 104.429 15.56 104.056 16.12C103.709 16.68 103.456 17.28 103.296 17.92C103.136 18.56 103.096 19.1733 103.176 19.76C103.256 20.32 103.429 20.8533 103.696 21.36C103.962 21.8667 104.282 22.3067 104.656 22.68C105.056 23.0267 105.496 23.3067 105.976 23.52C106.456 23.7067 106.936 23.7867 107.416 23.76ZM162.456 23.44L159.616 23.24L161.896 1.4L165.696 1.68L164.256 11.24L171.136 9.16L172.256 12.28L163.736 14.72L162.456 23.44ZM153.736 21.56L142.016 25.28L139.456 22.44L146.776 15.44L138.496 17.44L137.616 15.56L145.736 7.96L138.896 9.56L138.256 6.64L148.536 4.28L150.376 7.12L143.456 13.76L151.976 11.76L152.736 13.56L144.736 21.32L152.896 18.76L153.736 21.56ZM157.096 25.24C158.136 25.1067 159.109 25.1467 160.016 25.36C160.949 25.5733 161.762 25.9333 162.456 26.44C163.149 26.92 163.696 27.52 164.096 28.24C164.522 28.96 164.736 29.7467 164.736 30.6C164.736 31.72 164.509 32.7333 164.056 33.64C163.629 34.5733 163.056 35.3733 162.336 36.04C161.642 36.7333 160.856 37.2933 159.976 37.72C159.122 38.1733 158.256 38.4533 157.376 38.56C156.469 38.6933 155.616 38.64 154.816 38.4C154.016 38.1867 153.296 37.8533 152.656 37.4C152.042 36.9467 151.509 36.4133 151.056 35.8C150.629 35.1867 150.336 34.5467 150.176 33.88C149.962 33 149.976 32.0933 150.216 31.16C150.456 30.2 150.882 29.32 151.496 28.52C152.109 27.6933 152.896 26.9867 153.856 26.4C154.816 25.7867 155.896 25.4 157.096 25.24ZM157.256 35.48C157.709 35.4267 158.176 35.28 158.656 35.04C159.136 34.8 159.576 34.48 159.976 34.08C160.376 33.7067 160.709 33.2667 160.976 32.76C161.242 32.2533 161.376 31.7067 161.376 31.12C161.376 30.6133 161.256 30.16 161.016 29.76C160.802 29.36 160.496 29.04 160.096 28.8C159.696 28.56 159.242 28.4 158.736 28.32C158.229 28.24 157.696 28.24 157.136 28.32C156.442 28.4533 155.829 28.68 155.296 29C154.789 29.2933 154.362 29.6533 154.016 30.08C153.696 30.48 153.469 30.9333 153.336 31.44C153.229 31.92 153.242 32.4 153.376 32.88C153.589 33.7067 154.056 34.3733 154.776 34.88C155.496 35.3867 156.322 35.5867 157.256 35.48ZM222.991 20.16L221.271 37.24L217.991 37L220.591 3.56L224.631 3.88L223.351 16.68L229.591 15.28L230.231 18.56L222.991 20.16ZM210.271 18.12L216.831 24.76L214.511 27.32L208.191 20.92L202.351 28.68L199.911 26.52L202.751 22.6L199.231 19L193.391 26.76L190.951 24.6L202.871 8.16L205.671 10.4L201.311 16.2L204.831 19.76L211.831 10.08L214.631 12.32L210.271 18.12ZM259.991 17.8L261.551 0.159997L265.271 0.439999L262.511 24.44L259.391 24.4L259.711 20.92L250.511 23.12L249.831 20.12L259.991 17.8ZM243.511 13.6C242.818 13.5733 242.178 13.3867 241.591 13.04C241.005 12.6667 240.485 12.2133 240.031 11.68C239.605 11.12 239.258 10.5067 238.991 9.84C238.751 9.17333 238.631 8.49333 238.631 7.8C238.631 7.16 238.738 6.48 238.951 5.76C239.165 5.04 239.511 4.37333 239.991 3.76C240.471 3.14667 241.085 2.62666 241.831 2.2C242.605 1.74667 243.538 1.46667 244.631 1.36C245.351 1.28 246.045 1.32 246.711 1.48C247.405 1.64 248.018 1.90667 248.551 2.28C249.085 2.65333 249.525 3.13333 249.871 3.72C250.218 4.30666 250.418 4.97333 250.471 5.72C250.551 6.86667 250.418 7.93333 250.071 8.92C249.751 9.90667 249.271 10.76 248.631 11.48C247.991 12.1733 247.231 12.72 246.351 13.12C245.471 13.4933 244.525 13.6533 243.511 13.6ZM241.831 7.56C241.778 8.22667 241.978 8.84 242.431 9.4C242.885 9.93333 243.418 10.2267 244.031 10.28C244.538 10.3067 245.005 10.24 245.431 10.08C245.858 9.89333 246.218 9.64 246.511 9.32C246.805 8.97333 247.018 8.57333 247.151 8.12C247.311 7.66667 247.365 7.17333 247.311 6.64C247.231 5.94667 246.925 5.42667 246.391 5.08C245.858 4.70667 245.258 4.54666 244.591 4.6C244.058 4.65333 243.618 4.78667 243.271 5C242.951 5.18667 242.685 5.42667 242.471 5.72C242.258 6.01333 242.098 6.32 241.991 6.64C241.911 6.96 241.858 7.26667 241.831 7.56ZM243.031 19.04L232.631 20.8L232.191 17.56L255.711 13.84L256.031 16.84L246.551 18.44H246.711L243.991 28.04L240.951 27.36L243.031 19.04ZM263.151 40.32L257.191 33L249.591 40.8L247.711 38.48L249.911 36.16L246.991 32.4L241.591 37.76L239.631 35.64L250.911 23.96L253.191 26.2L249.151 30.24L252.031 33.88L260.431 24.96L262.591 27.4L259.351 30.76L265.351 38.04L263.151 40.32ZM305.271 5.4L301.031 35.8L297.751 35.4L299.911 17.44L291.591 19.4L290.911 15.96L300.351 13.8L301.391 5.08L305.271 5.4ZM281.351 11.08C282.231 11.0267 283.098 11.12 283.951 11.36C284.831 11.5733 285.618 11.9467 286.311 12.48C287.031 13.0133 287.618 13.6933 288.071 14.52C288.551 15.3467 288.831 16.3333 288.911 17.48C289.018 18.84 288.871 20.12 288.471 21.32C288.098 22.4933 287.525 23.52 286.751 24.4C285.978 25.2533 285.058 25.9333 283.991 26.44C282.925 26.9467 281.765 27.2 280.511 27.2C279.711 27.2 278.938 27.04 278.191 26.72C277.445 26.3733 276.778 25.9067 276.191 25.32C275.631 24.7067 275.151 23.9867 274.751 23.16C274.378 22.3333 274.138 21.4267 274.031 20.44C273.925 19.4267 274.018 18.3867 274.311 17.32C274.631 16.2533 275.111 15.2667 275.751 14.36C276.391 13.4533 277.191 12.7067 278.151 12.12C279.111 11.5067 280.178 11.16 281.351 11.08ZM281.151 23.68C281.818 23.6533 282.431 23.4933 282.991 23.2C283.578 22.88 284.071 22.4667 284.471 21.96C284.871 21.4533 285.165 20.8667 285.351 20.2C285.565 19.5333 285.631 18.8267 285.551 18.08C285.498 17.4667 285.325 16.9333 285.031 16.48C284.738 16.0267 284.378 15.6667 283.951 15.4C283.551 15.1067 283.111 14.9067 282.631 14.8C282.151 14.6667 281.671 14.6133 281.191 14.64C280.551 14.72 279.965 14.9333 279.431 15.28C278.925 15.6 278.498 16.0133 278.151 16.52C277.805 17.0267 277.551 17.5867 277.391 18.2C277.231 18.7867 277.178 19.3733 277.231 19.96C277.365 21.08 277.818 21.9867 278.591 22.68C279.365 23.3733 280.218 23.7067 281.151 23.68ZM315.831 29.08L319.111 32.4L315.791 35.72L312.471 32.44L315.831 29.08ZM326.631 29.08L329.911 32.4L326.591 35.72L323.271 32.44L326.631 29.08ZM337.071 29.08L340.351 32.4L337.031 35.72L333.711 32.44L337.071 29.08Z"
        fill="none"
        stroke="#f5f5f5"
        strokeWidth="2"
        strokeLinecap="round"
        vectorEffect="non-scaling-stroke"
      />
    </svg>
  );
}
export default SecondQ1;
