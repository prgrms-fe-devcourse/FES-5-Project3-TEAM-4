import { useEffect, useRef, type RefObject } from 'react';
import { DrawSVGPlugin } from 'gsap/DrawSVGPlugin';
import gsap from 'gsap';

gsap.registerPlugin(DrawSVGPlugin);

interface Props {
  parentTimeline: RefObject<gsap.core.Timeline | null>;
  label?: string;
}

function FirstQ({ parentTimeline, label }: Props) {
  const svgRef = useRef<SVGSVGElement | null>(null);

  useEffect(() => {
    const ctx = gsap.context(() => {
      if (!svgRef.current) return;
      if (!parentTimeline.current) return;
      // 모든 path를 선택
      const paths = svgRef.current.querySelectorAll('path');

      parentTimeline.current.fromTo(
        paths,
        { drawSVG: '0% 0%' },
        {
          duration: 4,
          stagger: 0.3,
          drawSVG: '0% 100%',
          ease: 'none',
        },
        label
      );
    }, svgRef);

    return () => ctx.revert();
  }, [label, parentTimeline]);

  return (
    <svg
      ref={svgRef}
      width="391"
      height="47"
      viewBox="0 0 391 47"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M15.376 8.8C15.344 9.44 15.312 10.08 15.28 10.72C15.28 11.36 15.152 12.016 14.896 12.688C14.544 12.944 13.968 13.04 13.168 12.976C12.4 12.88 11.744 12.64 11.2 12.256C10.656 11.84 10.272 11.36 10.048 10.816C9.856 10.24 9.744 9.584 9.712 8.848L12.736 1.36L15.04 2.944L12.832 8.08C13.344 8.112 13.856 8.208 14.368 8.368C14.912 8.496 15.248 8.64 15.376 8.8ZM6.496 8.8C6.464 9.44 6.432 10.08 6.4 10.72C6.4 11.36 6.256 12.016 5.968 12.688C5.808 12.816 5.568 12.912 5.248 12.976C4.96 13.008 4.64 13.008 4.288 12.976C3.936 12.912 3.584 12.832 3.232 12.736C2.88 12.608 2.576 12.448 2.32 12.256C1.744 11.84 1.36 11.36 1.168 10.816C0.976 10.24 0.864 9.584 0.832 8.848L3.808 1.36L6.16 2.944L3.904 8.08C4.448 8.112 4.976 8.208 5.488 8.368C6.032 8.496 6.368 8.64 6.496 8.8ZM28.1035 8.944C28.1035 7.76 28.3435 6.72 28.8235 5.824C29.3035 4.928 29.9595 4.176 30.7915 3.568C31.6235 2.96 32.5835 2.496 33.6715 2.176C34.7915 1.856 35.9595 1.696 37.1755 1.696C38.4235 1.696 39.5915 1.888 40.6795 2.272C41.7995 2.656 42.7595 3.168 43.5595 3.808C44.3275 4.48 44.9355 5.248 45.3835 6.112C45.8635 6.976 46.1035 7.92 46.1035 8.944C46.0715 11.12 45.3355 12.8 43.8955 13.984C42.4555 15.104 40.8395 15.808 39.0475 16.096L39.3355 21.472L53.6875 21.856L53.5915 24.784L20.8555 24.112L20.6635 21.184L35.9755 21.472L35.7835 16.144C34.6635 16.048 33.6235 15.808 32.6635 15.424C31.7355 15.04 30.9355 14.544 30.2635 13.936C29.5915 13.296 29.0635 12.56 28.6795 11.728C28.2955 10.896 28.1035 9.968 28.1035 8.944ZM43.0795 8.944C43.0795 7.792 42.5195 6.752 41.3995 5.824C40.2795 4.864 38.8395 4.4 37.0795 4.432C34.9355 4.528 33.3835 5.056 32.4235 6.016C31.4635 6.976 31.0155 7.952 31.0795 8.944C31.0795 9.712 31.2715 10.384 31.6555 10.96C32.0395 11.536 32.5035 12.016 33.0475 12.4C33.6235 12.784 34.2635 13.056 34.9675 13.216C35.7035 13.376 36.4395 13.44 37.1755 13.408C38.7435 13.344 40.1035 12.928 41.2555 12.16C42.4715 11.328 43.0795 10.256 43.0795 8.944ZM26.6635 27.76H49.0795L49.2715 38.08L28.2955 38.176L28.3915 42.208L51.9115 41.728L52.0075 44.656L26.7595 45.088L25.1755 43.696L24.9835 35.056L45.9115 35.152L45.8155 30.496L26.7595 30.592L26.6635 27.76ZM77.9605 15.472L77.7685 18.4L57.4165 16.912V13.888L65.9605 14.464L66.0565 6.4L69.1765 6.592V14.848L77.9605 15.472ZM74.3125 29.728C74.1205 30.976 73.7685 32.08 73.2565 33.04C72.7445 34 72.1045 34.8 71.3365 35.44C70.6005 36.048 69.7365 36.48 68.7445 36.736C67.7845 36.96 66.7605 36.976 65.6725 36.784C64.4245 36.592 63.4005 36.128 62.6005 35.392C61.8005 34.624 61.1925 33.776 60.7765 32.848C60.3285 31.888 60.0405 30.912 59.9125 29.92C59.8165 28.928 59.8325 28.048 59.9605 27.28C60.0885 26.48 60.3285 25.632 60.6805 24.736C61.0325 23.84 61.5285 23.04 62.1685 22.336C62.8405 21.6 63.6565 21.04 64.6165 20.656C65.5765 20.24 66.7765 20.112 68.2165 20.272C70.3605 20.528 71.9925 21.536 73.1125 23.296C74.2325 25.12 74.6325 27.264 74.3125 29.728ZM62.9845 27.76C62.8565 28.432 62.8405 29.104 62.9365 29.776C63.0325 30.416 63.2245 31.008 63.5125 31.552C63.8005 32.096 64.1685 32.576 64.6165 32.992C65.0965 33.376 65.6405 33.632 66.2485 33.76C67.2405 34.016 68.2965 33.824 69.4165 33.184C70.5685 32.48 71.2565 31.168 71.4805 29.248C71.5765 28.48 71.5765 27.76 71.4805 27.088C71.4165 26.384 71.2245 25.76 70.9045 25.216C70.5845 24.64 70.1685 24.192 69.6565 23.872C69.1445 23.52 68.5045 23.312 67.7365 23.248C66.2645 23.152 65.1605 23.52 64.4245 24.352C63.7205 25.184 63.2405 26.32 62.9845 27.76ZM90.5365 9.568H93.7045V40.816H90.5365V26.08L85.3525 25.984L85.2085 40.432L81.8005 40.336L81.9925 9.664L85.3525 9.76V22.816L90.5365 22.912V9.568ZM118.266 16.048C118.266 17.68 118.042 19.072 117.594 20.224C117.146 21.344 116.538 22.272 115.77 23.008C114.97 23.712 114.058 24.224 113.034 24.544C112.042 24.864 110.986 25.008 109.866 24.976C108.426 24.912 107.178 24.624 106.122 24.112C105.098 23.568 104.266 22.88 103.626 22.048C102.954 21.248 102.474 20.32 102.186 19.264C101.93 18.176 101.834 17.072 101.898 15.952C101.898 15.12 102.042 14.208 102.33 13.216C102.618 12.224 103.098 11.312 103.77 10.48C104.41 9.616 105.258 8.912 106.314 8.368C107.402 7.792 108.73 7.504 110.298 7.504C112.442 7.504 114.298 8.256 115.866 9.76C116.57 10.528 117.13 11.44 117.546 12.496C117.994 13.52 118.234 14.704 118.266 16.048ZM104.97 15.952C104.906 16.912 105.002 17.776 105.258 18.544C105.514 19.28 105.866 19.92 106.314 20.464C106.762 20.976 107.29 21.376 107.898 21.664C108.538 21.92 109.194 22.048 109.866 22.048C111.53 22.112 112.826 21.648 113.754 20.656C114.714 19.664 115.194 18.16 115.194 16.144C115.194 14.736 114.762 13.456 113.898 12.304C113.098 11.12 111.834 10.528 110.106 10.528C108.538 10.528 107.306 11.104 106.41 12.256C105.514 13.344 105.034 14.576 104.97 15.952ZM129.978 6.112L129.45 38.464L126.138 38.368L126.714 6.112H129.978ZM123.354 30.304L123.258 33.184L98.1055 32.368L98.2015 29.344L123.354 30.304ZM174.454 19.792H171.43L171.334 7.504L155.782 7.024L156.166 3.952L172.582 4.432L174.55 6.4L174.454 19.792ZM181.75 26.992L148.726 27.28L148.918 24.4L181.654 24.112L181.75 26.992ZM154.006 32.08L178.006 32.368L178.678 45.952L155.878 46.144L154.582 44.752L154.006 32.08ZM157.462 35.056L157.75 43.312H175.462L174.982 35.056H157.462ZM204.055 5.152L204.151 8.176H197.047V13.792L206.503 23.536L204.631 25.984L195.607 17.152L188.119 26.944L185.767 24.496L193.735 13.888L193.831 8.176L186.247 8.272L186.151 5.056L204.055 5.152ZM217.447 3.568L217.639 32.944H214.471L214.279 14.56L203.239 14.656V11.536L214.279 11.44V3.664L217.447 3.568ZM200.023 42.688L200.119 31.12L203.335 31.216L203.143 41.008L219.415 40.912L219.511 43.888L201.367 44.176L200.023 42.688ZM233.224 12.112C233.224 10.896 233.464 9.824 233.944 8.896C234.424 7.936 235.096 7.152 235.96 6.544C236.792 5.904 237.752 5.424 238.84 5.104C239.96 4.784 241.144 4.624 242.392 4.624C243.736 4.624 244.968 4.816 246.088 5.2C247.24 5.584 248.216 6.128 249.016 6.832C249.816 7.472 250.44 8.256 250.888 9.184C251.368 10.112 251.608 11.088 251.608 12.112C251.576 13.456 251.288 14.592 250.744 15.52C250.232 16.448 249.544 17.2 248.68 17.776C247.816 18.416 246.824 18.864 245.704 19.12C244.616 19.376 243.512 19.504 242.392 19.504C239.704 19.504 237.496 18.832 235.768 17.488C234.072 16.144 233.224 14.352 233.224 12.112ZM245.608 26.944L245.896 36.592L242.584 36.496L242.2 26.944L225.976 27.184L226.168 24.304L258.904 23.632L259 26.56L245.608 26.944ZM234.136 44.08L232.072 42.496L231.928 31.984H235L235.288 40.912L256.264 41.344V42.88C256.264 43.296 256.28 43.568 256.312 43.696C256.312 43.888 256.312 44.016 256.312 44.08C256.344 44.176 256.36 44.272 256.36 44.368L234.136 44.08ZM248.584 12.112C248.584 10.928 248.008 9.824 246.856 8.8C245.672 7.776 244.152 7.312 242.296 7.408C241.24 7.472 240.312 7.648 239.512 7.936C238.744 8.224 238.104 8.592 237.592 9.04C237.08 9.488 236.712 9.984 236.488 10.528C236.264 11.072 236.168 11.6 236.2 12.112C236.2 12.88 236.392 13.552 236.776 14.128C237.16 14.704 237.656 15.184 238.264 15.568C238.872 15.952 239.544 16.24 240.28 16.432C241.048 16.592 241.816 16.656 242.584 16.624C244.152 16.56 245.528 16.128 246.712 15.328C247.96 14.528 248.584 13.456 248.584 12.112ZM276.261 21.76C276.261 20.64 276.389 19.456 276.645 18.208C276.901 16.96 277.365 15.792 278.037 14.704C278.677 13.616 279.541 12.736 280.629 12.064C281.749 11.36 283.141 11.008 284.805 11.008C286.085 11.008 287.189 11.248 288.117 11.728C289.077 12.176 289.909 12.768 290.613 13.504C291.253 14.272 291.765 15.136 292.149 16.096C292.565 17.024 292.853 17.984 293.013 18.976L305.397 18.88L305.205 7.312H308.325L308.853 39.28L305.781 39.376L305.397 22.048L293.301 21.952C293.269 23.072 293.109 24.256 292.821 25.504C292.565 26.72 292.101 27.856 291.429 28.912C290.789 29.936 289.909 30.784 288.789 31.456C287.701 32.128 286.373 32.464 284.805 32.464C283.173 32.464 281.797 32.128 280.677 31.456C279.589 30.752 278.725 29.872 278.085 28.816C277.413 27.728 276.933 26.56 276.645 25.312C276.389 24.064 276.261 22.88 276.261 21.76ZM279.333 21.76C279.333 22.56 279.413 23.408 279.573 24.304C279.733 25.2 280.021 26.048 280.437 26.848C280.821 27.616 281.365 28.256 282.069 28.768C282.773 29.28 283.685 29.536 284.805 29.536C285.893 29.536 286.789 29.28 287.493 28.768C288.197 28.256 288.741 27.616 289.125 26.848C289.541 26.048 289.829 25.2 289.989 24.304C290.149 23.408 290.229 22.56 290.229 21.76C290.229 20.992 290.133 20.16 289.941 19.264C289.781 18.336 289.493 17.488 289.077 16.72C288.693 15.92 288.149 15.264 287.445 14.752C286.741 14.24 285.861 13.984 284.805 13.984C283.653 13.984 282.725 14.24 282.021 14.752C281.317 15.264 280.773 15.92 280.389 16.72C279.973 17.488 279.685 18.336 279.525 19.264C279.397 20.16 279.333 20.992 279.333 21.76ZM322.758 12.304L317.334 12.208L317.238 26.656L322.662 26.752L322.758 12.304ZM333.99 29.824L315.414 29.728L314.021 28.24L314.118 9.088L332.886 9.664V12.592L326.022 12.4L325.83 26.848H333.99V29.824ZM346.566 6.976H349.734V34.912L346.566 35.008V20.992L341.238 20.944L341.046 34.624L337.83 34.72L338.022 7.024L341.238 7.12V17.824L346.566 17.92V6.976ZM352.407 9.904C353.239 8.272 354.487 6.88 356.151 5.728C357.847 4.576 359.879 4 362.247 4C364.999 4 367.223 4.672 368.919 6.016C370.647 7.328 371.655 9.28 371.943 11.872C372.071 13.28 371.943 14.64 371.559 15.952C371.175 17.264 370.455 18.512 369.399 19.696C368.567 20.592 367.751 21.424 366.951 22.192C366.183 22.96 365.367 23.696 364.503 24.4C364.087 24.752 363.783 25.136 363.591 25.552C363.399 25.936 363.271 26.368 363.207 26.848C363.175 27.296 363.175 27.792 363.207 28.336C363.271 28.848 363.303 29.376 363.303 29.92L360.183 30.016C360.183 29.344 360.167 28.672 360.135 28C360.135 27.328 360.167 26.688 360.231 26.08C360.295 25.472 360.423 24.912 360.615 24.4C360.839 23.856 361.175 23.392 361.623 23.008C362.967 21.792 364.135 20.704 365.127 19.744C366.119 18.752 366.903 17.872 367.479 17.104C368.503 15.696 368.935 14 368.775 12.016C368.711 11.184 368.487 10.464 368.103 9.856C367.719 9.216 367.223 8.688 366.615 8.272C366.007 7.856 365.319 7.552 364.551 7.36C363.815 7.136 363.047 7.024 362.247 7.024C360.583 7.024 359.095 7.44 357.783 8.272C356.471 9.104 355.447 10.192 354.711 11.536L352.407 9.904ZM359.607 37.6C359.639 36.96 359.655 36.32 359.655 35.68C359.687 35.008 359.831 34.352 360.087 33.712C360.343 33.648 360.647 33.6 360.999 33.568C361.383 33.536 361.767 33.552 362.151 33.616C362.535 33.68 362.903 33.792 363.255 33.952C363.607 34.08 363.879 34.272 364.071 34.528C364.167 34.848 364.135 35.392 363.975 36.16C363.815 36.896 363.622 37.552 363.398 38.128C363.207 38.256 362.903 38.32 362.487 38.32C362.103 38.32 361.703 38.288 361.287 38.224C360.903 38.16 360.551 38.064 360.231 37.936C359.911 37.808 359.703 37.696 359.607 37.6ZM375.974 4.912C376.006 4.24 376.022 3.584 376.022 2.944C376.054 2.304 376.198 1.664 376.454 1.024C376.614 0.895998 376.838 0.815998 377.126 0.783998C377.446 0.719997 377.782 0.703998 378.134 0.735999C378.486 0.767999 378.838 0.847999 379.19 0.975999C379.542 1.072 379.846 1.216 380.102 1.408C380.678 1.824 381.062 2.32 381.254 2.896C381.478 3.44 381.606 4.096 381.638 4.864L378.614 12.304L376.262 10.768L378.518 5.584C378.006 5.552 377.478 5.472 376.934 5.344C376.39 5.184 376.07 5.04 375.974 4.912ZM384.854 4.912C384.886 4.24 384.902 3.584 384.902 2.944C384.934 2.304 385.094 1.664 385.382 1.024C385.542 0.895998 385.766 0.815998 386.054 0.783998C386.374 0.719997 386.71 0.703998 387.062 0.735999C387.414 0.767999 387.766 0.847999 388.118 0.975999C388.47 1.072 388.774 1.216 389.03 1.408C389.574 1.824 389.942 2.32 390.134 2.896C390.358 3.44 390.486 4.096 390.518 4.864L387.542 12.304L385.19 10.768L387.446 5.584C386.902 5.552 386.358 5.472 385.814 5.344C385.302 5.184 384.982 5.04 384.854 4.912Z"
        fill="none"
        stroke="#f5f5f5"
        strokeWidth="2"
        strokeLinecap="round"
        vectorEffect="non-scaling-stroke"
      />
    </svg>
  );
}
export default FirstQ;
